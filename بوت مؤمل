import logging
from aiogram import Bot, Dispatcher, types
from aiogram.types import InlineKeyboardButton, InlineKeyboardMarkup
from aiogram.utils import executor
import random

# ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
API_TOKEN = '7879641673:AAFrkfN8Kr0lLLCcCe6DnJTqZv1Hz8W9j_I'

# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª
logging.basicConfig(level=logging.INFO)
bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

# Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
default_responses = [
    "Ù‡Ù„Ø§ Ø¨ÙŠÙƒ! Ø´Ù„ÙˆÙ†ÙƒØŸ ğŸŒŸ",
    "Ø´ÙƒÙˆ Ù…Ø§ÙƒÙˆØŸ",
    "Ù…Ù†Ùˆ ÙŠØ­ØªØ§Ø¬Ù†ÙŠØŸ ğŸ™‹â€â™‚ï¸",
    "Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨Ø®Ø¯Ù…ØªÙƒ! ğŸ˜Š",
]

# Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
def get_settings_keyboard():
    keyboard = InlineKeyboardMarkup(row_width=2)
    keyboard.add(
        InlineKeyboardButton("ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª", callback_data="enable_chats"),
        InlineKeyboardButton("Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª", callback_data="disable_chats"),
        InlineKeyboardButton("Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª", callback_data="group_settings"),
    )
    return keyboard

# Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø£ÙˆØ§Ù…Ø±
@dp.message_handler(commands=['start'])
async def start_command(message: types.Message):
    await message.reply("Ù‡Ù„Ø§! Ø£Ù†Ø§ Ø¨ÙˆØª Ù„Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„ÙˆØ¯ÙŠØ©. ğŸŒŸ Ø§Ø³ØªØ®Ø¯Ù… /settings Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.")

@dp.message_handler(commands=['settings'])
async def settings_command(message: types.Message):
    keyboard = get_settings_keyboard()
    await message.reply("ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª:", reply_markup=keyboard)

# Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø§Ù…Ø©
@dp.message_handler(content_types=types.ContentType.TEXT)
async def chat_reply(message: types.Message):
    if message.chat.type in ['group', 'supergroup']:
        if '@' in message.text and f"@{(await bot.me).username}" in message.text:
            await message.reply("Ù†Ø¹Ù… Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø´ØªØ±ÙŠØ¯ØŸ ğŸ˜Š")
    else:
        response = random.choice(default_responses)
        await message.reply(response)

# Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
@dp.callback_query_handler(lambda call: call.data in ["enable_chats", "disable_chats", "group_settings"])
async def handle_settings(call: types.CallbackQuery):
    if call.data == "enable_chats":
        await call.message.edit_text("âœ… Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª ØªÙ… ØªØ´ØºÙŠÙ„Ù‡Ø§!")
    elif call.data == "disable_chats":
        await call.message.edit_text("â›” Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª ØªÙ… Ø¥ÙŠÙ‚Ø§ÙÙ‡Ø§!")
    elif call.data == "group_settings":
        await call.message.edit_text("ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±!")

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
if __name__ == "__main__":
    executor.start_polling(dp, skip_updates=True)
